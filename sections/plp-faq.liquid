{% if collection.metafields.custom.faq_question_and_answer.value != blank %}
{{ 'plp-faq.css' | asset_url | stylesheet_tag }}
{%- style -%}
  .section-{{ section.id }}-margin {
    margin-bottom: {{ section.settings.margin_bottom_desktop }}px;
  }

  @media screen and (max-width: 750px) {
    .section-{{ section.id }}-margin {
      margin-bottom: {{ section.settings.margin_bottom_mobile }}px;
    }
  }
{%- endstyle -%}
<div class="plp-faq page-width section-{{ section.id }}-margin">
<h2 class="heading">{{ section.settings.heading }}</h2>
  <div class="plpfaqsection page-width">
  {% assign sizes = collection.metafields.custom.faq_question_and_answer.value %}
       {% for i in sizes %}
  {% assign question-arr =  i | split:"##"  %}
     <details>
  <summary>
    <p class="question">{{ question-arr[0] }}<span class="arrow-down">{% render 'icon-caret' %}</span><span class="arrow-up">{% render 'icon-caret' %}</p>
  </summary>
  <p class="answer">
   {{ question-arr[1] }}
  </p>
</details>
    {% endfor %}
  </div>
</div>
    {% endif %}
<script>
const details = document.querySelectorAll(".plpfaqsection details");

details.forEach((targetDetail) => {
  targetDetail.addEventListener("click", () => {
    // Close all the details that are not targetDetail.
    details.forEach((detail) => {
      if (detail !== targetDetail) {
        detail.removeAttribute("open");
      }
    });
  });
});
</script>
{% schema %}
 {
  "name": "plp faq",
   "settings": [
      {
  "type": "text",
  "id": "heading",
  "label": "Section Heading"
},
     {
      "type": "range",
      "id": "margin_bottom_desktop",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin Bottom Desktop",
      "default": 36
    },
    {
      "type": "range",
      "id": "margin_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin Bottom Mobile",
      "default": 36
    }

    ],
   "presets": [
    {
      "name": "PLP FAQ"
    }
  ] 

}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}