{%- style -%}
  .section-{{ section.id }}-margin {
    margin-bottom: {{ section.settings.margin_bottom_desktop }}px;
  }

  @media screen and (max-width: 750px) {
    .section-{{ section.id }}-margin {
      margin-bottom: {{ section.settings.margin_bottom_mobile }}px;
    }
  }
{%- endstyle -%}
<div class="icon-captiontitle"><h2>{{ section.settings.heading }}</h2></div>
  <div class=" icon-caption  page-width section-{{ section.id }}-margin " style="background-color:{{ section.settings.bgcolor }};" >
      
{%- for block in section.blocks -%}
  {%- case block.type -%}
    {%- when 'text' -%}
      <div class=" icon-captiondiv swiper-slide" role="region" {{ block.shopify_attributes }}>
        {%- if block.settings.text != blank -%}         
                {{  block.settings.image | image_url: width: 150 | image_tag: loading: 'lazy'}}
           <p class="icon-caption__message ">
                   {{ block.settings.text | escape }}
              </p>
        {%- endif -%}
      </div>
  {%- endcase -%}
{%- endfor -%}  
  </div>
 
<style>
  .icon-captiontitle{text-align:center;}
  .icon-caption{display:flex;align-items:center;}
  .icon-captiondiv{width:25%;}
   .icon-captiondiv img{width: 70%; object-fit: contain;height: 60px;}
     .icon-caption{padding: 15px; margin-top: 15px;}
   .icon-captiondiv{padding:12px;text-align:center;}
   .icon-captiondiv p{text-align:center; font-size: clamp(calc(17 * .8px),calc(17 * (100vw / var(--viewportDesktop))),calc(17 * 1.1px));
    line-height: clamp(21px, calc(22* (100vw /  var(--viewportDesktop))), 25px);color:#000;}
  @media screen and (max-width:750px){
    .icon-captiondiv{width:50%;}
     .icon-caption{flex-wrap:wrap;}
    .icon-captiondiv p{font-size:13px;    line-height: 18px;}
     .icon-caption{padding: 10px;}
     .icon-captiondiv{padding:0 5px;padding-bottom:1.5rem;}.icon-captiondiv img{height:40px;}
  }
</style>

{% schema %}
{
  "name": "Icon With Caption",
   "settings": [
      {
  "type": "color",
  "id": "bgcolor",
  "label": "Background color"
},
      {
  "type": "checkbox",
  "id": "showmobile",
  "label": "Show on Mobile",
  "default":true
},
      {
  "type": "text",
  "id": "heading",
  "label": "Section Heading"
},
     {
      "type": "range",
      "id": "margin_bottom_desktop",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin Bottom Desktop",
      "default": 36
    },
    {
      "type": "range",
      "id": "margin_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margin Bottom Mobile",
      "default": 36
    }

    ],
  "max_blocks": 12,
  
  "blocks": [
    {
      "type": "text",
      "name": "add block",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "default": "Welcome to our store",
          "label": "Text block"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    }
  ],
   "presets": [
    {
      "name": "Icon With Caption",
      "blocks": [
        {
          "type": "text"
        }
      
      ]
    }
  ] 

}
{% endschema %}
